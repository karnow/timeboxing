(this.webpackJsonptimeboxing=this.webpackJsonptimeboxing||[]).push([[0],{116:function(e,t,n){"use strict";var r=n(0),o=n.n(r).a.createContext({Logout:null});t.a=o},122:function(e,t,n){e.exports=n(232)},136:function(e,t){},138:function(e,t){},148:function(e,t){},150:function(e,t){},177:function(e,t){},179:function(e,t){},180:function(e,t){},186:function(e,t){},188:function(e,t){},206:function(e,t){},209:function(e,t){},225:function(e,t){},228:function(e,t){},231:function(e,t,n){},232:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(32),u=n.n(i),c=n(117),a=n(15),s=n(118),l=n(31),f=n(58),d=n(59),E=n(61),b=n(60),m=n(62),p=n(5);var T=function(e){var t=e.errorMessage,n=e.onLoginAttempt,i=Object(r.useRef)(),u=Object(r.useRef)();return o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n({email:i.current.value,password:u.current.value}),i.current.value="",u.current.value=""},className:"LoginForm"},t?o.a.createElement("div",{className:"LoginForm__error-message"},t):null,o.a.createElement("label",null,"Email",o.a.createElement("input",{ref:i,type:"text",defaultValue:"bob@example.com"})),o.a.createElement("br",null),o.a.createElement("label",null,"Has\u0142o",o.a.createElement("input",{ref:u,type:"password",defaultValue:"secret"})),o.a.createElement("br",null),o.a.createElement("button",null,"Zaloguj si\u0119"))},v=n(10),h=n.n(v),I=n(17),O={login:function(){var e=Object(I.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.email,r=t.password,"bob@example.com"!==n||"secret"!==r){e.next=3;break}return e.abrupt("return",{accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImJvYkBleGFtcGxlLmNvbSIsImlhdCI6MTYwNzUwNDU2NiwiZXhwIjoxNjA3NTA4MTY2LCJzdWIiOiIxIn0.w9aIezqtop9r_xDXrzw6fuf5tL2TsLhP00vlDaLOvMA"});case 3:throw new Error("Invalid credentials");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=n(63),g=n(116),y=o.a.lazy((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,267))})),_=function(e){Object(E.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(f.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={accessToken:null,previousLoginAttemptFailed:!1},e.isUserLoggedIn=function(){return e.state.accessToken},e.handleLogout=function(){localStorage.removeItem("userTimebox"),e.setState({accessToken:null,previousLoginAttemptFailed:!1}),console.log(e.state.accessToken),e.props.deleteFinishTime()},e.handleLoginAttempt=function(t){console.log(t),O.login(t).then((function(t){var n=t.accessToken;console.log(n),localStorage.setItem("userTimebox",n),e.setState({accessToken:n,previousLoginAttemptFailed:!1})})).catch((function(){e.setState({previousLoginAttemptFailed:!0})}))},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("userTimebox");console.log(e),this.setState({accessToken:e})}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},this.isUserLoggedIn()?o.a.createElement(x.a.Provider,{value:{accessToken:this.state.accessToken}},o.a.createElement(g.a.Provider,{value:{Logout:this.handleLogout}},o.a.createElement(o.a.Suspense,{fallback:"...loading"},o.a.createElement(y,null)))):o.a.createElement(T,{errorMessage:this.state.previousLoginAttemptFailed?"Nie uda\u0142o si\u0119 zalogowa\u0107":null,onLoginAttempt:this.handleLoginAttempt}))}}]),n}(o.a.Component);var S=Object(l.b)((function(e){return{timeboxesFinished:Object(p.e)(e)}}),(function(e){return{deleteFinishTime:function(){e(Object(m.c)())}}}))(_),j=(n(231),Object(a.createStore)(p.m,Object(s.composeWithDevTools)(Object(a.applyMiddleware)(c.a))));u.a.render(o.a.createElement(l.a,{store:j},o.a.createElement(S,null)),document.getElementById("root"))},5:function(e,t,n){"use strict";n.d(t,"m",(function(){return c})),n.d(t,"b",(function(){return m})),n.d(t,"f",(function(){return p})),n.d(t,"a",(function(){return T})),n.d(t,"h",(function(){return v})),n.d(t,"j",(function(){return h})),n.d(t,"l",(function(){return I})),n.d(t,"g",(function(){return O})),n.d(t,"c",(function(){return x})),n.d(t,"i",(function(){return g})),n.d(t,"k",(function(){return y})),n.d(t,"d",(function(){return _})),n.d(t,"e",(function(){return S}));var r=n(4),o=n(57),i=n(15),u={searchQuery:"",timeboxesFinished:[],timeboxesCopi:[]},c=Object(i.combineReducers)({first:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{currentTimeboxID:a(e.currentTimeboxID,t),timeboxes:s(e.timeboxes,t),currentlyEditedTimeboxId:l(e.currentlyEditedTimeboxId,t),isEditable:f(e.isEditable,t),loading:d(e.loading,t),error:E(e.error,t),hasError:b(e.hasError,t)}},secound:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TIMEBOX_FINISHED":var n=t.timebox,i=[].concat(Object(o.a)(e.timeboxesFinished),[n]);return Object(r.a)(Object(r.a)({},e),{},{timeboxesFinished:i});case"DELETE_FINISHED_TIMEBOXES":return Object(r.a)(Object(r.a)({},e),{},{timeboxesFinished:[]});case"CHANGE_SEARCH_QUERY":var c=t.searchQuery;return Object(r.a)(Object(r.a)({},e),{},{searchQuery:c});case"SEARCH_RESET":return Object(r.a)(Object(r.a)({},e),{},{searchQuery:""});case"RESET_TIMEBOXES_COPI":return Object(r.a)(Object(r.a)({},e),{},{timeboxesCopi:[]});case"SEARCH_RESULT":var a=t.timeboxesed;t.searchQuery;return console.log(a),Object(r.a)(Object(r.a)({},e),{},{timeboxesCopi:a});default:return e}}});function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TIMEBOX_MAKE_CURRENT":var n=t.timebox;return n.id;case"TIMEBOX_REMOVE":var r=t.indexToRemove,o=e===r.id?null:e;return o;default:return e}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TIMEBOXES_SET":var n=t.timeboxes;return n;case"TIMEBOX_ADD":var r=t.timebox,i=[].concat(Object(o.a)(e),[r]);return i;case"TIMEBOX_REMOVE":var u=t.indexToRemove,c=e.filter((function(e){return e.id!==u.id}));return c;case"TIMEBOX_REPLACE":var a=t.replacedTimebox,s=e.map((function(e){return e.id===a.id?a:e}));return s;case"SEARCH_RESULT":var l=t.timeboxesed,f=t.searchQuery;console.log(l),console.log(f);var d=l.filter((function(e){return e.title.toLowerCase().includes(f.toLowerCase())}));return d;case"SEARCH_RESET":var E=t.timeboxes;return E;default:return e}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TIMEBOX_EDIT_STOP":return null;case"TIMEBOX_EDIT_START":var n=t.currentlyEditedTimeboxId;return n;case"TIMEBOXES_EDITABLE":return null;default:return e}}function f(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TIMEBOX_EDIT_STOP":return!1;case"TIMEBOX_EDIT_START":return!0;case"TIMEBOXES_EDITABLE":return!1;default:return e}}function d(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_INDICATOR_DISABLE":return!1;default:return e}}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR_SET":var n=t.error;return n;default:return e}}function b(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR_SELV":return!0;default:return e}}var m=function(e){return e.first.timeboxes},p=function(e){return e.first.timeboxes.filter((function(t){return t.id!==e.first.currentTimeboxID}))},T=function(e){return e.first.loading},v=function(e){return e.first.error},h=function(e){return e.first.hasError},I=function(e,t){return e.first.currentlyEditedTimeboxId&&e.first.currentlyEditedTimeboxId===t.id},O=function(e){return e.secound.searchQuery},x=function(e){return e.secound.timeboxesCopi},g=function(e){return e.first.isEditable},y=function(e){return!!e.first.currentTimeboxID},_=function(e){return y(e)?j(e,e.first.currentTimeboxID):null},S=function(e){return e.secound.timeboxesFinished},j=function(e,t){return e.first.timeboxes.find((function(e){return e.id===t}))}},62:function(e,t,n){"use strict";n.d(t,"l",(function(){return b})),n.d(t,"k",(function(){return m})),n.d(t,"c",(function(){return T})),n.d(t,"i",(function(){return v})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return I})),n.d(t,"j",(function(){return O})),n.d(t,"h",(function(){return x})),n.d(t,"a",(function(){return g})),n.d(t,"g",(function(){return y})),n.d(t,"b",(function(){return _})),n.d(t,"f",(function(){return S}));var r=n(4),o=n(10),i=n.n(o),u=n(17),c=n(120);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(t){setTimeout(t,e)}))}var s=[{id:"a",title:"ucz\u0119 si\u0119 list",totalTimeInMinutes:25,isEdit:!1},{id:"b",title:"ucz\u0119 si\u0119 formularzy",totalTimeInMinutes:15,isEdit:!1},{id:"c",title:"ucz\u0119 si\u0119 komponent\xf3w niekontrolowanych",totalTimeInMinutes:5,isEdit:!1}];function l(e){var t=s.findIndex((function(t){return t.id==e}));if(t<0)throw new Error("Timbox o podanym id nie istnieje");return t}var f={getAllTimeboxes:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(200);case 2:return console.log("GET all :",s),e.abrupt("return",[].concat(s));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addTimebox:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(200);case 2:return n=Object(r.a)(Object(r.a)({},t),{},{id:Object(c.a)()}),console.log("POST :",s),s.push(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),replaceTimebox:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(200);case 2:if(t.id){e.next=4;break}throw new Error("cannot replace timebox without an id");case 4:return n=l(t.id),o=Object(r.a)({},t),s[n]=o,console.log("PUT :",s),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeTimebox:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(200);case 2:if(console.log(t),t){e.next=5;break}throw new Error("cannot remove timebox without an id");case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},d=n(5),E=function(e){return{type:"TIMEBOX_REMOVE",indexToRemove:e}},b=function(){return{type:"TIMEBOX_EDIT_STOP"}},m=function(e){return{type:"TIMEBOX_EDIT_START",currentlyEditedTimeboxId:e.id}},p=function(e){return{type:"ADD_TIMEBOX_FINISHED",timebox:e}},T=function(){return{type:"DELETE_FINISHED_TIMEBOXES"}},v=function(e){return{type:"CHANGE_SEARCH_QUERY",searchQuery:e.target.value}},h=function(e){return{type:"TIMEBOX_MAKE_CURRENT",timebox:e}},I=function(){return function(e,t){Object(d.k)(t())&&(console.log(Object(d.d)(t())),e(p(Object(d.d)(t()))),e(E(Object(d.d)(t()))))}},O=function(e,t){return function(t,n){var r,o;e.preventDefault(),console.log(Object(d.g)(n())),console.log(Object(d.b)(n())),t((r=Object(d.b)(n()),o=Object(d.g)(n()),{type:"SEARCH_RESULT",timeboxesed:r,searchQuery:o}))}},x=function(){return function(e,t){e(function(e){return{type:"SEARCH_RESET",timeboxes:e}}(Object(d.c)(t()))),e({type:"RESET_TIMEBOXES_COPI"})}},g=function(e){return function(t){f.getAllTimeboxes(e).then((function(e){return t(function(e){return{type:"TIMEBOXES_SET",timeboxes:e}}(e))})).catch((function(e){return Promise.reject(t(function(e){return{type:"ERROR_SET",error:e}}(e)))})).finally((function(){return t({type:"LOADING_INDICATOR_DISABLE"})}))}},y=function(e,t){return function(n){console.log(e),f.removeTimebox(e,t).then((function(e){n(E(e)),console.log(e),n(p(e))})).catch((function(e){return console.log("B\u0142\u0105d :",e)}))}},_=function(e,t){return function(n){try{f.addTimebox(e,t).then((function(e){return n({type:"TIMEBOX_ADD",timebox:e})}))}catch(r){console.log("jest b\u0142\u0105d przy tworzeniu timeboxa",r),n({type:"ERROR_SELV"})}}},S=function(e,t,n){return function(r){console.log(e),f.replaceTimebox(t,n).then((function(e){return r(function(e){return{type:"TIMEBOX_REPLACE",replacedTimebox:e}}(e))})).finally((function(){return r({type:"TIMEBOXES_EDITABLE"})}))}}},63:function(e,t,n){"use strict";var r=n(0),o=n.n(r).a.createContext({accessToken:null});t.a=o}},[[122,1,2]]]);
//# sourceMappingURL=main.2f4f4229.chunk.js.map